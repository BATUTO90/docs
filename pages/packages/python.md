# Python

Buildkite Packages provides registry support for Python-based (PyPI) packages.

Once your Python registry has been [created](/docs/packages/manage-registries#create-a-registry), you can publish/upload packages (generated from your application's build) to this registry via the `curl` command presented on your Python registry's details page.

To view and copy this `curl` command:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your Python registry on this page.
1. Select _Publish a Python Package_ and in the resulting dialog, use the copy icon at the top-right of the code box to copy this curl command and submit it to publish a package to your Python registry.

This command provides:

- The specific URL to publish a package to your specific Python registry in Buildkite.
- The API write token (generated by Buildkite Packages) required to publish packages to your Python registry.

## Publish a package

The following `curl` command (modified as required before submitting) describes the process above to publish a package to your Python registry:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/{org.slug}/{registry.name}/packages.json \
  -H "Authorization: Bearer $REGISTRY_WRITE_TOKEN" \
  -F "package[package_file]=@<path_to_file>"
```

where:

<%= render_markdown partial: 'packages/org_slug' %>

<%= render_markdown partial: 'packages/python_registry_name' %>

- `$REGISTRY_WRITE_TOKEN` is the Buildkite Packages-generated API token required to publish/upload packages to your Python registry.

<%= render_markdown partial: 'packages/path_to_file' %>

For example, to upload the file `my-python-package-0.9.7b1.tar.gz` from the current directory to the _My-Python-packages_ registry in the _My organization_ Buildkite organization, run the `curl` command:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/my-organization/my-python-packages/packages.json \
  -H "Authorization: Bearer $REPLACE_WITH_MY_REGISTRY_WRITE_TOKEN" \
  -F "package[package_file]=@my-python-package-0.9.7b1.tar.gz"
```

## Access a package's details

A Python package's details can be accessed from this registry using the _Packages_ section of your Python registry page.

To access your Python package's details page:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your Python registry on this page.
1. On your Python registry page, select the package within the _Packages_ section. The package's details page is displayed.

<%= render_markdown partial: 'packages/package_details_page_sections' %>

### Downloading a package

A Python package can be downloaded from the package's details page.

To download a package:

1. [Access the package's details](#access-a-packages-details).
1. Select _Download_.

### Installing a package

1. [Access the package's details](#access-a-packages-details).
1. Ensure the _Installation_ > _Installation instructions_ section is displayed.
1. Copy the code snippet and paste this into either the package installer for Python (pip) configuration (`pip.conf`) file or end of the virtualenv `requirements.txt` file before installing this Python package.

The `pip.conf` code snippet is based on this format:

```conf
# Add this to the [global] section in your ~/.pip/pip.conf:
[global]
extra-index-url="https://buildkitepackages.com/{org.slug}/{registry.name}/pypi/simple"
```

where:

<%= render_markdown partial: 'packages/org_slug' %>

<%= render_markdown partial: 'packages/python_registry_name' %>

The alternative `requirements.txt` (for virtualenv) code snippet is based on this format:

```ini
# Otherwise if installing on a virtualenv, add this to the bottom of your requirements.txt:
--extra-index-url="https://buildkitepackages.com/{org.slug}/{registry.name}/pypi/simple"
```
