# Debian

Buildkite Packages provides repository support for Debian-based packages (deb) in Debian and Ubuntu variants.

Once your deb (Debian and Ubuntu) package repository has been [created](/docs/packages/manage-repositories#create-a-repository), you can upload packages (generated from your application's build) to this repository via the `curl` command presented on your deb package repository's details page.

To view and copy this `curl` command:

1. Select _Packages_ in the global navigation to access the _Repositories_ page.
1. Select your deb package repository on this page.
1. Expand _Publishing a package_ section and use the copy icon at the top-right of the code box to copy this curl command and submit it to publish a package to your deb package repository.

This command provides:

- The specific URL to upload a package to your specific deb package repository in Buildkite.
- The authentication credentials (generated by Buildkite Packages) required to upload packages to your deb package repository.

## Publish a package

The following `curl` command (modified accordingly before submitting) describes the process above to publish a package to your deb package repository:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/{org.slug}/{deb.package.repository.name}/packages.json \
  -u "deb-package-repository-credentials" \
  -F "package[package_file]=@<path_to_file>"
```

For example, to upload the file `my-deb-package_1.0-2_amd64.deb` from the current directory to the _My-Debian-Packages_ repository in the _My organization_ Buildkite organization, run the `curl` command:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/my-organization/my-debian-packages/packages.json \
  -u "replace-with-my-debian-packages-credentials" \
  -F "package[package_file]=@my-deb-package_1.0-2_amd64.deb"
```

## Access a package's details

A Debian (deb) package's details can be accessed from this repository using the _Packages_ section of your deb package repository page.

To access your deb package's details page:

1. Select _Packages_ in the global navigation to access the _Repositories_ page.
1. Select your deb package repository on this page.
1. Select the package within the _Packages_ section of the deb package repository page. The package's details page is displayed.

The package's details page provides the following information in the following sections:

- _Installation_: [installation instructions](#access-a-packages-details-installing-a-package)
- _Files_: a list of files contained within the package and their directory structure
- _Details_: a list of checksum values for this package—MD5, SHA1, SHA256, and SHA512
- _About this version_: a brief (metadata) description about the package
- _Details_: details about the:

    * name of the package file
    * the package version
    * the repository the package is located in
    * the package's visibility—whether the package is publicly accessible or is _Private_ and requires authentication to access
    * the distribution name / version

- _Last pushed_: the date when the last package was uploaded to the repository
- _Total files_: the total number of files (and directories) within the package
- _Dependencies_: the number of dependency packages required by this package
- _Package size_: the storage size (in bytes) of this package
- _Downloads_: the number of times this package has been downloaded

### Downloading a package

A Debian (deb) package can be downloaded from the package's details page.

To download a package:

1. [Access the package's details](#access-a-packages-details).
1. Select _Download_.

### Installing a package

1. [Access the package's details](#access-a-packages-details).
1. Ensure the _Installation_ > _Installation instructions_ section is displayed.
1. Copy the code snippet and paste this into the relevant command line tool required to install this package.

The package code snippet is based on this format:

```bash
apt update
type -p curl >/dev/null || apt install curl -y
type -p gpg >/dev/null || apt install gpg -y
curl -fsSL "https://buildkitepackages.com/{org.slug}/{deb.package.repository.name}/gpgkey" | gpg --dearmor -o /etc/apt/keyrings/{org.slug}_{deb.package.repository.name}-archive-keyring.gpg
curl -sfSL "https://buildkitepackages.com/install/repositories/{org.slug}/{deb.package.repository.name}/config_file.list?source=buildkite&name=${HOSTNAME}" > /etc/apt/sources.list.d/buildkite-{org.slug}-{deb.package.repository.name}.list
apt update && apt install my-deb-package-name
```
