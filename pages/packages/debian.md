# Debian

Buildkite Packages provides registry support for Debian-based (deb) packages for Debian and Ubuntu operating system variants.

Once your Debian registry has been [created](/docs/packages/manage-registries#create-a-registry), you can publish/upload packages (generated from your application's build) to this registry via the `curl` command presented on your Debian registry's details page.

To view and copy this `curl` command:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your Debian registry on this page.
1. Select _Publish a Deb Package_ and in the resulting dialog, use the copy icon at the top-right of the code box to copy this curl command and submit it to publish a package to your Debian registry.

This command provides:

- The specific URL to publish a package to your specific Debian registry in Buildkite.
- The API write token (generated by Buildkite Packages) required to publish packages to your Debian registry.

## Publish a package

The following `curl` command (modified as required before submitting) describes the process above to publish a package to your Debian registry:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/{org.slug}/{registry.name}/packages.json \
  -H "Authorization: Bearer $REGISTRY_WRITE_TOKEN" \
  -F "package[package_file]=@<path_to_file>"
```

where:

<%= render_markdown partial: 'packages/org_slug' %>

<%= render_markdown partial: 'packages/debian_registry_name' %>

- `$REGISTRY_WRITE_TOKEN` is the Buildkite Packages-generated API token required to publish/upload packages to your Debian registry.

<%= render_markdown partial: 'packages/path_to_file' %>

For example, to upload the file `my-deb-package_1.0-2_amd64.deb` from the current directory to the _My-Debian-packages_ registry in the _My organization_ Buildkite organization, run the `curl` command:

```bash
curl -X POST https://buildkitepackages.com/api/v1/repos/my-organization/my-debian-packages/packages.json \
  -H "Authorization: Bearer $REPLACE_WITH_MY_REGISTRY_WRITE_TOKEN" \
  -F "package[package_file]=@my-deb-package_1.0-2_amd64.deb"
```

## Access a package's details

A Debian (deb) package's details can be accessed from this registry using the _Packages_ section of your Debian registry page.

To access your deb package's details page:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your Debian registry on this page.
1. On your Debian registry page, select the package within the _Packages_ section. The package's details page is displayed.

<%= render_markdown partial: 'packages/package_details_page_sections' %>

### Downloading a package

A Debian (deb) package can be downloaded from the package's details page.

To download a package:

1. [Access the package's details](#access-a-packages-details).
1. Select _Download_.

### Installing a package

1. [Access the package's details](#access-a-packages-details).
1. Ensure the _Installation_ > _Installation instructions_ section is displayed.
1. Copy the code snippet and paste it into your terminal.

This code snippet is a series of commands based on this format:

```bash
apt update
type -p curl >/dev/null || apt install curl -y
type -p gpg >/dev/null || apt install gpg -y
curl -fsSL "https://buildkitepackages.com/{org.slug}/{registry.name}/gpgkey" | gpg --dearmor -o /etc/apt/keyrings/{org.slug}_{registry.name}-archive-keyring.gpg
curl -sfSL "https://buildkitepackages.com/install/repositories/{org.slug}/{registry.name}/config_file.list?source=buildkite&name=${HOSTNAME}" > /etc/apt/sources.list.d/buildkite-{org.slug}-{registry.name}.list
apt update && apt install my-deb-package-name
```

where:

<%= render_markdown partial: 'packages/org_slug' %>

<%= render_markdown partial: 'packages/debian_registry_name' %>
