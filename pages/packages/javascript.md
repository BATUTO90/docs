# JavaScript

Buildkite Packages provides registry support for JavaScript-based (Node.js npm) packages.

Once your JavaScript registry has been [created](/docs/packages/manage-registries#create-a-registry), you can publish/upload packages (generated from your application's build) to this registry by configuring your `~/.npmrc` and application's relevant `package.json` files with the command/code snippets presented on your JavaScript registry's details page.

To view and copy the required command/code snippet for your `~/.npmrc` and `package.json` configurations:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your JavaScript registry on this page.
1. Select _Publish a Nodejs Package_ and in the resulting dialog, use the copy icon at the top-right of the relevant code box to copy its snippet and paste it into your command line tool or the appropriate file.

These file configurations contain the following:

- `~/.npmrc`: the URL for your specific JavaScript registry in Buildkite and API write token (generated by Buildkite Packages) required to publish the package to this registry
- `package.json`: the URL for your specific JavaScript registry in Buildkite.

## Publish a package

The following steps describe the process above:

1. Copy the following `npm` command, paste it and modify as required before submitting to update your `~/.npmrc` file:

    ```bash
    npm set "//buildkitepackages.com/{org.slug}/{registry.name}/npm/:_authToken" registry-write-token
    ```

    where:
    <%= render_markdown partial: 'packages/org_slug' %>
    <%= render_markdown partial: 'packages/javascript_registry_name_and_token' %>

    **Note:**
    * If your `.npmrc` file doesn't exist, this command automatically creates it for you.
    * This step only needs to be conducted once for the life of your JavaScript registry.

1. Copy the following JSON code snippet (or the line of code beginning `"publishConfig": ...`) and paste it to modify your Node.js project's `package.json` file accordingly:

    ```json
    {
      ...,
      "publishConfig": {"registry": "https://buildkitepackages.com/{org.slug}/{registry.name}/npm/"}
    }
    ```

    **Note:** Don't forget to add the separating comma between `"publishConfig": ...` and the previous field.

1. Publish your package:

    ```bash
    npm publish
    ```

## Access a package's details

A JavaScript package's details can be accessed from this registry using the _Packages_ section of your JavaScript registry page.

To access your JavaScript package's details page:

1. Select _Packages_ in the global navigation to access the _Registries_ page.
1. Select your JavaScript registry on this page.
1. On your JavaScript registry page, select the package within the _Packages_ section. The package's details page is displayed.

<%= render_markdown partial: 'packages/package_details_page_sections' %>

### Downloading a package

A JavaScript package can be downloaded from the package's details page.

To download a package:

1. [Access the package's details](#access-a-packages-details).
1. Select _Download_.

### Installing a package

1. [Access the package's details](#access-a-packages-details).
1. Ensure the _Installation_ > _Installation instructions_ section is displayed.
1. Copy the code snippet and paste it into your terminal.

This code snippet is based on this format:

```bash
npm install nodejs-package-name@version.number \
  --registry https://{registry.read.token}@buildkitepackages.com/{org.slug}/{registry.name}/npm/
```

where:

- `{registry.read.token}` is the Buildkite Packages-generated API token required to download packages from your JavaScript registry.

<%= render_markdown partial: 'packages/org_slug' %>

- `{registry.name}` is the name of your JavaScript registry.
